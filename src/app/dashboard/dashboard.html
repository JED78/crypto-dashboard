<div class="min-h-screen w-full bg-gradient-to-b from-white to-blue-100 p-8 flex animate-fade-in">

<!-- ⭐ PANEL LATERAL IZQUIERDO AJUSTADO -->
<div class="w-64 -ml-10 mt-32 mr-8
            bg-white/60 backdrop-blur-md p-6 rounded-xl shadow-lg
            border border-white/40 h-fit">

  <h2 class="text-xl font-semibold text-blue-700 mb-4">Controles</h2>

  <!-- CRIPTOMONEDA -->
  <mat-form-field *ngIf="allCryptos.length > 0" appearance="fill" class="w-full mb-4">
    <mat-label>Criptomoneda</mat-label>
    <mat-select [(value)]="selectedCrypto" (selectionChange)="onSelectionChange()">
      <mat-option *ngFor="let c of allCryptos" [value]="c">{{ c }}</mat-option>
    </mat-select>
  </mat-form-field>

  <!-- MONEDA QUOTE -->
  <mat-form-field *ngIf="allQuotes.length > 0" appearance="fill" class="w-full mb-4">
    <mat-label>Moneda</mat-label>
    <mat-select [(value)]="selectedQuote" (selectionChange)="onSelectionChange()">
      <mat-option *ngFor="let q of allQuotes" [value]="q">{{ q }}</mat-option>
    </mat-select>
  </mat-form-field>

  <!-- REFRESCO -->
  <mat-form-field appearance="fill" class="w-full">
    <mat-label>Refresco</mat-label>
    <mat-select [value]="selectedRefresh" (selectionChange)="onSelectionChange($event.value)">
      <mat-option *ngFor="let r of refreshOptions" [value]="r.value">
        {{ r.label }}
      </mat-option>
    </mat-select>
  </mat-form-field>

</div>

  <!-- ⭐ CONTENIDO PRINCIPAL -->
  <div class="flex-1 flex flex-col items-center">

    <!-- TÍTULO -->
    <h1 class="text-4xl font-bold text-blue-700 mb-6 drop-shadow-sm animate-slide-down">
      Crypto Dashboard (Binance)
    </h1>

    <!-- PRECIO ACTUAL -->
    <div class="current text-center mb-6 animate-fade-in-up">
      <h2 class="text-3xl font-semibold text-blue-800 mb-2">
        {{ selectedCrypto }}/{{ selectedQuote }}
      </h2>

      <p *ngIf="currentPrice !== undefined; else loading"
         class="text-xl font-medium text-gray-700">
        Precio actual:
        <span class="text-blue-600 font-bold">
          {{ currentPrice | number: '1.2-2' }}
        </span>
      </p>

      <p *ngIf="lastUpdate" class="text-sm text-gray-600 mt-1">
        Última actualización: {{ lastUpdate | date: 'HH:mm:ss' }}
      </p>
    </div>

    <ng-template #loading>
      <span class="text-gray-500 animate-pulse">Cargando...</span>
    </ng-template>

    <!-- ⭐ CARRUSEL DE GRÁFICAS -->
    <div class="relative w-full max-w-4xl mt-4">

      <!-- Botón Izquierda -->
      <button 
        class="absolute left-0 top-1/2 -translate-y-1/2 text-white p-3 rounded-full shadow-lg hover:bg-blue-700 transition z-20"
        (click)="prevChart()">
        ⬅️
      </button>

      <!-- Botón Derecha -->
      <button 
        class="absolute right-0 top-1/2 -translate-y-1/2 text-white p-3 rounded-full shadow-lg hover:bg-blue-700 transition z-20"
        (click)="nextChart()">
        ➡️
      </button>

      <!-- Contenedor del carrusel -->
      <div class="overflow-hidden rounded-xl shadow-xl bg-white/70 backdrop-blur-md p-6">

        <!-- Contenedor con altura fija -->
        <div class="w-full h-80 flex items-center justify-center">

          <!-- SLIDE 1: Precio -->
          <div *ngIf="currentSlide === 0" class="w-full h-full animate-fade-in">
            <canvas 
              class="w-full h-full bg-white"
              baseChart
              [data]="chartData"
              [options]="chartOptions"
              [type]="'line'">
            </canvas>
          </div>

          <!-- SLIDE 2: Volumen -->
          <div *ngIf="currentSlide === 1" class="w-full h-full animate-fade-in">
            <canvas 
              class="w-full h-full bg-white"
              baseChart
              [data]="chartVolumeData"
              [options]="chartVolumeOptions"
              [type]="'bar'">
            </canvas>
          </div>

          <!-- SLIDE 3: RSI -->
          <div *ngIf="currentSlide === 2" class="w-full h-full animate-fade-in">
            <canvas 
              class="w-full h-full bg-white"
              baseChart
              [data]="chartRsiData"
              [options]="chartRsiOptions"
              [type]="'line'">
            </canvas>
          </div>

          <!-- SLIDE 4: Top 5 Subidas -->
          <div *ngIf="currentSlide === 3" class="w-full h-full animate-fade-in">
            <canvas 
              class="w-full h-full bg-white"
              baseChart
              [data]="chartTop5Data"
              [options]="chartTop5Options"
              [type]="'bar'">
            </canvas>
          </div>

        </div>
      </div>
    </div>

  </div>
</div>